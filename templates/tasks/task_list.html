{% extends 'base.html' %}

{% block content %}

<style>
    .task-card:hover {
        transform: translateY(-3px);
        box-shadow: 0 6px 18px rgba(0,0,0,0.15);
    }
    .task-badges .badge {
        font-size: 0.8rem;
        padding: 6px 10px;
    }
</style>

<div class="mx-auto" style="max-width: 900px;">

    <div class="d-flex justify-content-between align-items-center mb-4">
        <h2 class="fw-bold text-dark">–°–ø–∏—Å–æ–∫ –∑–∞–≤–¥–∞–Ω—å</h2>
        <a href="{% url 'tasks:task-create'%}" class="btn btn-success shadow-sm px-4">
            ‚ûï –î–æ–¥–∞—Ç–∏
        </a>
    </div>

    <!-- –§—ñ–ª—å—Ç—Ä -->
    <form method="get" class="card p-3 mb-4 shadow border-0">
        <div class="row g-3 align-items-end">

            <div class="col-md-4">
                <label class="form-label fw-semibold">{{ form.status.label }}</label>
                {{ form.status }}
            </div>

            <div class="col-md-4">
                <label class="form-label fw-semibold">{{ form.priority.label }}</label>
                {{ form.priority }}
            </div>

            <div class="col-md-4">
                <button type="submit" class="btn btn-primary w-100 py-2">
                    üîç –§—ñ–ª—å—Ç—Ä—É–≤–∞—Ç–∏
                </button>
            </div>

        </div>
    </form>

    <!-- –°–ø–∏—Å–æ–∫ –∑–∞–≤–¥–∞–Ω—å -->
    <div class="d-flex flex-column gap-3">
        {% for task in tasks %}
        <div class="card task-card p-3 shadow-sm border-0">

            <div class="d-flex justify-content-between align-items-start">
                
                <!-- –õ—ñ–≤–∞ —á–∞—Å—Ç–∏–Ω–∞ -->
                <div>
                    <h5 class="fw-bold mb-1">
                        <a href="{% url 'tasks:task-detail' task.pk %}" class="text-decoration-none text-dark">
                            {{ task.title }}
                        </a>
                    </h5>

                    <div class="task-badges mt-1">
                        <span class="badge bg-primary">{{ task.status }}</span>
                        <span class="badge bg-secondary">{{ task.priority }}</span>
                    </div>
                </div>

                <!-- –ö–Ω–æ–ø–∫–∞ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è -->
                <form action="{% url 'tasks:task-complete' task.pk %}" method="post">
                    {% csrf_token %}
                    <button type="submit" class="btn btn-outline-success btn-sm">
                        ‚úî –í–∏–∫–æ–Ω–∞–Ω–æ
                    </button>
                </form>

            </div>

        </div>
        {% empty %}
        <div class="text-center py-5 bg-white rounded shadow-sm">
            <h5 class="fw-bold">–ó–∞–≤–¥–∞–Ω—å –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ</h5>
            <p class="text-muted">–°–ø—Ä–æ–±—É–π—Ç–µ –∑–º—ñ–Ω–∏—Ç–∏ —Ñ—ñ–ª—å—Ç—Ä –∞–±–æ –¥–æ–¥–∞—Ç–∏ –Ω–æ–≤–µ –∑–∞–≤–¥–∞–Ω–Ω—è.</p>
        </div>
        {% endfor %}
    </div>

</div>

{% endblock %}
